{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% block main %}

<style>
    .idCard {
        width: 100%;
        overflow-x: scroll;
    }

    .church {
        background-color: black;
        color: white;
        padding: 1rem;
    }

    table {
        width: max-content;
    }

    th {
        padding: 1rem 0.5rem;
    }

    td {
        padding: 0.5rem;
    }
    input{
        width: max-content !important;
    }
    .filter > div{
        flex-wrap: wrap;
        gap: 1rem;
    }
    div.filter > div > div{
        margin-bottom: 0 !important;
    }
</style>
<div class="container mt-3">
    <h3>List of Registered Attendee</h3>
    <form action="{% url 'search' %}" id="myForm" method="post">
        <div class="filter">
            <h4>Filter</h4>
            <div class="d-flex">
                {{form |crispy}}
        </div>
        </div>
    {% csrf_token %}
        <div class="d-flex">
            <input class="form-control" type="text" name="search" placeholder="Search....">
            <button type="submit" class="btn mt-0">Search</button>
        </div>
    </form>
    <br>
    <div class="idCard">
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Full Name</th>
                    <th>Email</th>
                    <th>Phone</th>
                    <th>Gender</th>
                    <th>Local Assembly</th>
                    <th>Nationality</th>
                    <th>State</th>
                    <th>LGA</th>
                    <th>Pastor</th>
                    <th>Camp</th>
                    <th>Date</th>
                </tr>
            </thead>
            <tbody>
                {% for attendee in Attendee %}
                <tr>
                    <td>{{forloop.counter}}</td>
                    <td>{{attendee.Full_Name | title}}</td>
                    <td>{{attendee.Email| title}}</td>
                    <td>{{attendee.Phone| title}}</td>
                    <td>{{attendee.Gender| title}}</td>
                    <td>{{attendee.Local_Assembly|title}}</td>
                    <td>{{attendee.Nationality| title}}</td>
                    <td>{{attendee.State_of_Residence| title}}</td>
                    <td>{{attendee.Local_Government_Area| title}}</td>
                    <td>{{attendee.Are_you_a_pastor| title}}</td>
                    <td>{{attendee.will_you_be_camping| title}}</td>
                    <td>{{attendee.created|date:"d/ M/ Y"}}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<script>
    function addClassesToFormFields() {
        var form = document.getElementById("myForm");
        var fields = form.querySelectorAll("input, select, textarea");  // Select all input, select, and textarea elements within the form

        for (var i = 0; i < fields.length; i++) {
            fields[i].classList.add("form-control");
            fields[i].classList.add("form-control-lg");
        }
    }
    addClassesToFormFields()
   
    document.getElementById("navRegister").classList.add("active")
</script>
{% endblock main %}